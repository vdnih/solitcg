# CLAUDE.md

## プロジェクト概要
- 名称: `solitcg`
- 種別: 1ターン完結型デジタルカードゲーム（詳細ルールは `docs/GAME_RULES.md` を参照）
- 技術スタック:
  - Flutter 3.x
  - Flame 最新版
  - Dart
- 対応プラットフォーム: Web（最優先）、将来的にiOS / Android

---

## ディレクトリ構成（暫定）
```

/lib
/core        # ゲームエンジン共通処理
/models      # カード・デッキ等のデータモデル
/systems     # ドロー・プレイ・破壊などのシステム
/ui          # 画面表示・操作UI
main.dart
/assets
/images
/cards       # カード画像
/docs
GAME\_RULES.md

```

---

## 開発方針
1. **最小実装から開始**
   - まずはカードをプレイして効果を発動できるまでを実装
   - 演出やチート防止は初期スコープ外
2. **ルール準拠**
   - ゲーム仕様は `docs/GAME_RULES.md` を唯一の参照元とする
3. **カードデータ外部化**
   - カードはJSON等で定義し、アプリは読み込む形
4. **ステートマシン的進行**
   - `ドロー → プレイ → ターン終了 → 勝敗判定` の流れを明確に実装
5. **相手ターン処理なし**
   - ソリティア形式のため、相手ターン中の処理エンジンは不要

---

## コーディングガイド
- データモデルは `freezed` + `json_serializable` を使用
- ゲーム進行は Flame の `Game` クラスを継承して構築
- 効果処理はスタックやキューを使い、順序は自動解決
- UI は最初はデバッグ向けにシンプルなボタン・テキストで実装

---

## 優先実装タスク（初期スプリント）
1. Flutter + Flame のセットアップ
2. カードモデルと読み込み処理
3. 手札表示・場表示の最低限UI
4. カードプレイと効果発動の処理
5. ターン進行と勝敗判定

---

## 参考
- ルール仕様: `docs/GAME_RULES.md`
- Flame: https://flame-engine.org/
- Flutter: https://flutter.dev/
```

