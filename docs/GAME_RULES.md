<<<<<<< HEAD
わかりました。
現時点までの内容を反映し、ソリティアTCG ルール仕様 v0.4.2として整理して書き出します。
カードスキーマ、ゲームの進行、勝利条件、タイプ別仕様、発動条件効果やstatsの扱いまで含めます。

⸻

ソリティアTCG ルール仕様 v0.4.2

1. ゲーム概要
	•	1対1で対戦するソリティア形式のTCG。
	•	相手ターンに割り込む効果は存在せず、処理は自分のターン内で完結する。
	•	バトル（戦闘）は未導入。カード効果のみで勝敗や盤面進行が決まる。
	•	デッキを削る・リソースを循環させる・コンボを構築することが主目的。

⸻

2. 勝利条件

2.1 基本勝利条件
	•	ライフ勝利：相手のライフ（初期8000）を0以下にする。
	•	デッキ勝利：ターン終了時、相手のデッキが0枚であれば勝利。
	•	※「次のターンにドローできない」ことが確定した時点で敗北扱いとする。
	•	効果勝利：カードの効果により明示的に勝利条件を満たす。

⸻

3. デッキ構築
	•	メインデッキ：40枚、同名カードは最大4枚。
	•	エクストラデッキ：最大10枚、同名カードは最大1枚。
	•	エクストラデッキには以下を含められる：
	•	儀式モンスター（ritual）
	•	秘術（arcane）
	•	レリック（relic）
	•	いずれも通常のモンスター・魔法・アーティファクトと同じカテゴリ扱い（サポートカードの対象になる）。

⸻

4. ゲームの流れ

4.1 初期設定
	1.	先攻・後攻をランダムに決定。
	2.	各プレイヤーは自分のデッキをシャッフル。
	3.	初期手札を5枚引く。

4.2 ターン構成
	1.	ドロー：1枚引く。
	2.	メインフェイズ：カードのプレイ、能力発動など自由に行う。
	•	場（board）には出せるカード数の上限なし。
	•	フィールド全体に影響するカードは**ドメイン（domain）**として同時に1枚まで設置可。
	3.	ターン終了判定：
	•	相手デッキが0枚 → 自分の勝利。
	•	勝利条件が満たされていない場合、相手ターンへ。

⸻

5. カードタイプ

type	説明
monster	通常モンスター。stats 必須。
ritual	儀式モンスター。stats 必須。エクストラに編入可。
spell	通常魔法。
arcane	秘術。エクストラに編入可。
artifact	アーティファクト。
relic	レリック。artifact としても扱う。エクストラに編入可。
equip	装備カード。
domain	フィールド全体に影響。1枚制限。


⸻

6. カードスキーマ

id: string         # 一意なID
name: string       # カード名
type: monster | ritual | spell | arcane | equip | artifact | relic | domain
tags: [string]     # 任意の分類タグ
text: string       # 説明文
version: integer   # カードデータバージョン

stats:             # monster / ritual のみ必須。他タイプは未定義。
  atk: integer     # 攻撃力（0以上、将来拡張用）
  def: integer     # 防御力（0以上、将来拡張用）
  hp:  integer     # ヒットポイント（0以上、hp <= 0 で破壊）

equip:  { valid_targets: [...] }   # equip専用パラメータ
domain: { unique: boolean }        # domain専用パラメータ（省略時true）

abilities:
  - when: on_play | on_enter | on_destroy | activated | static | on_draw | on_discard | on_domain_set
    pre: [ "条件式", ... ]         # 発動前提：状態チェックのみ
    priority: integer              # 効果解決の優先度
    effect:                        # 実際の効果（効果0が消費アクション）
      - { op: ..., ... }


⸻

7. 発動条件効果（pre と効果0）
	•	pre：フィールドや状態のチェックのみを行う。動作は禁止。
	•	効果0：effect の先頭に記載し、pre に対応したリソース消費を行う。
	•	例：

pre:
  - "count(type:'artifact', zone:'board:self') >= 2"
effect:
  - { op: destroy, target: "choose:self:artifact", count: 2 } # 効果0
  - { op: draw, count: 3 }


⸻

8. HPと破壊ルール
	•	monster / ritual のみ hp を持つ。
	•	hp <= 0 になった瞬間、そのカードは破壊される。
	•	破壊時には on_destroy 能力が誘発。
	•	hpの変動は効果（例：modify_stat）でのみ発生する。

⸻

9. フィールド構造
	•	場（board）：制限なくカードを出せる。
	•	ドメイン（domain）：場全体に影響するカード。常に1枚まで。
	•	墓地（grave）：破壊・使用済みカードが送られる。
	•	除外（banish）：ゲームから取り除かれる領域。
	•	エクストラ（extra）：儀式・秘術・レリック専用の別山札。

⸻

10. 補足ルール
	•	割り込み処理は存在しない。
	•	同名制限はメインとエクストラで別カウント。
	•	ドロー不能になっても即敗北せず、ターン終了時に判定。

⸻

=======
# ソリティアTCG ルール仕様 v0.5.0

## 1. ゲーム概要

* 1対1で対戦する **ソリティア形式のTCG**。
* 相手ターンに割り込む効果は存在せず、処理は **自分のターン内で完結** する。
* バトル（戦闘）は未導入。カード効果のみで勝敗や盤面進行が決まる。
* デッキを削る・リソースを循環させる・コンボを構築することが主目的。

---

## 2. 勝利条件

### 2.1 基本勝利条件

* **ライフ勝利**：相手のライフ（初期 8000）を 0 以下にする。
* **デッキ勝利**：ターン終了時、相手のデッキが 0 枚であれば勝利。

  * ※「次のターンにドローできない」ことが確定した時点で敗北扱いとする。
* **効果勝利**：カードの効果により明示的に勝利条件を満たす。

---

## 3. デッキ構築

* メインデッキ：**40枚**、同名カードは **最大4枚**。
* エクストラデッキ：**最大10枚**、同名カードは **最大1枚**。

  * エクストラデッキには以下を含められる：

    * 儀式モンスター（`ritual`）
    * 秘術（`arcane`）
    * レリック（`relic`）
  * いずれも通常のモンスター・魔法・アーティファクトと同じカテゴリ扱い（サポートカードの対象になる）。

---

## 4. ゲームの流れ

### 4.1 初期設定

1. 先攻・後攻をランダムに決定。
2. 各プレイヤーは自分のデッキをシャッフル。
3. 初期手札を **5枚** 引く。

### 4.2 ターン構成

1. **ドロー**：1枚引く。
2. **メインフェイズ**：カードのプレイ、能力発動など自由に行う。

   * **場（board）** には出せるカード数の上限なし。
   * フィールド全体に影響するカードは **ドメイン（`domain`）** として同時に 1 枚まで設置可。
3. **ターン終了判定**：

   * 相手デッキが 0 枚 → 自分の勝利。
   * 勝利条件が満たされていない場合、相手ターンへ。

---

## 5. カードタイプ

| type       | 説明                                |
| ---------- | --------------------------------- |
| `monster`  | 通常モンスター。`stats` 必須。               |
| `ritual`   | 儀式モンスター。`stats` 必須。エクストラに編入可。     |
| `spell`    | 通常魔法。使い切り効果。                      |
| `arcane`   | 秘術。強力効果。エクストラに編入可。                |
| `artifact` | アーティファクト（永続系も含む）。                 |
| `relic`    | レリック。`artifact` としても扱う。エクストラに編入可。 |
| `equip`    | 装備カード。                            |
| `domain`   | フィールド全体に影響。1枚制限。                  |

---

## 6. カードスキーマ概要

```yaml
id: string         # 一意なID
name: string       # カード名
type: monster | ritual | spell | arcane | equip | artifact | relic | domain
tags: [string]     # 任意の分類タグ
text: string       # 説明文
version: integer   # カードデータバージョン

stats:             # monster / ritual のみ必須
  atk: integer     # 攻撃力（0以上）
  def: integer     # 防御力（0以上）
  hp:  integer     # ヒットポイント（0以上、hp <= 0 で破壊）

domain: { unique: boolean }  # domain専用パラメータ（省略時 true）

abilities:
  - when: on_play | on_destroy | on_discard | activated | static
    pre: [ "条件式", ... ]    # 発動前提：状態チェックのみ
    priority: integer         # 効果解決の優先度（省略時 0）
    effect:                   # 実際の効果
      - { op: ..., ... }
```

---

## 7. 発動条件と効果順序

* **`pre`**：条件判定のみを行う。動作は禁止。
* 消費やコストは `effect` の先頭に記述する。
* 例：

```yaml
pre:
  - "count(type:'artifact', zone:'board:self') >= 2"
effect:
  - { op: destroy, target: "choose:self:artifact", count: 2 }
  - { op: draw, count: 3 }
```

---

## 8. HPと破壊ルール

* `monster` / `ritual` のみ `hp` を持つ。
* **hp <= 0** になった瞬間、そのカードは破壊される。
* 破壊時には `on_destroy` 能力が誘発。
* hpの変動は効果（例：`modify_stat`）でのみ発生する。

---

## 9. ゾーン構造

* **手札（hand）**
* **デッキ（deck）**
* **墓地（grave）**：破壊・使用済みカードが送られる。
* **場（board）**：制限なくカードを出せる。
* **ドメイン（domain）**：場全体に影響するカード。常に 1 枚まで。
* **エクストラ（extra）**：儀式・秘術・レリック専用の別山札。

> 除外（banish）ゾーンは存在しない。

---

## 10. 補足ルール

* 割り込み処理は存在しない。
* 同名制限はメインとエクストラで別カウント。
* ドロー不能になっても即敗北せず、ターン終了時に判定。
>>>>>>> addcard
